<div class="flex flex-col w-10/12 mx-auto mt-10">
  <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
    <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
      <form class="
            shadow
            overflow-hidden
            border-b border-gray-200
            sm:rounded-lg
            tableForm
          ">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="
                    px-6
                    py-3
                    text-left text-xs
                    font-medium
                    text-gray-500
                    uppercase
                    tracking-wider
                  ">
                StudentId
              </th>
              <th scope="col" class="
                    px-6
                    py-3
                    text-left text-xs
                    font-medium
                    text-gray-500
                    uppercase
                    tracking-wider
                  ">
                Full Name
              </th>
              <th scope="col" class="
                    px-6
                    py-3
                    text-left text-xs
                    font-medium
                    text-gray-500
                    uppercase
                    tracking-wider
                  ">
                Email
              </th>
              <th scope="col" class="
              px-6
              py-3
              text-left text-xs
              font-medium
              text-gray-500
              uppercase
              tracking-wider
            ">
                Options
              </th>

              <th scope="col" class="relative px-6 py-3">
                <span class="sr-only">Edit</span>
              </th>
            </tr>
          </thead>

          <tbody class="bg-white divide-y divide-gray-200 tbody"></tbody>
        </table>
      </form>
    </div>
  </div>
</div>
<!-- modal -->
<form class="fixed z-10 inset-0 overflow-y-auto modal updateForm hidden ">
  <div class="
        flex
        items-end
        justify-center
        min-h-screen
        pt-4
        px-4
        pb-20
        text-center
        sm:block sm:p-0
      ">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 click" aria-hidden="true"></div>

    <!-- This element is to trick the browser into centering the modal contents. -->
    <span class="hidden sm:inline-block sm:align-middle sm:h-screen " aria-hidden="true">&#8203;</span>

    <div class="
          inline-block
          align-bottom
          bg-white
          rounded-lg
          text-left
          overflow-hidden
          shadow-xl
          transform
          transition-all
          sm:my-8 sm:align-middle
          max-w-lg
          w-full
        ">
      <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
        <!-- modal body  -->
        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left ">
          <div class="flex items-center gap-5 mb-4">
            <div class="
                  mx-auto
                  flex-shrink-0 flex
                  items-center
                  justify-center
                  h-12
                  w-12
                  rounded-full
                  bg-indigo-100
                  sm:mx-0 sm:h-10 sm:w-10
                ">

            </div>
            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
              Update Or Add Student
            </h3>
          </div>
          <!--   -->
          <div class="mt-2 ">
            <!-- FullName -->
            <div class="mt-5">Full Name</div>
            <div>
              <input type="text" name="fullName"
                class="text-sm text-gray-900 seats border rounded-md w-full fullName" />
            </div>
            <!-- Email -->
            <div class="mt-5">Email</div>
            <div>
              <input type="email" name="email" class="text-sm text-gray-900 seats border rounded-md w-full email" />
            </div>
            <!-- userName -->
            <div class="mt-5">userName</div>
            <div>
              <input type="text" name="userName"
                class="text-sm text-gray-900 seats border rounded-md w-full userName" />
            </div>
            <!-- password -->
            <div class="mt-5">
              <div>Password</div>
              <div>
                <input type="text" name="userName"
                  class="text-sm text-gray-900 seats border rounded-md w-full password" />
              </div>
            </div>

            <!-- Class -->

          </div>
        </div>
      </div>
      <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
        <input type="button" value="update" id="" class="
              update
              w-full
              inline-flex
              justify-center
              rounded-md
              border border-transparent
              shadow-sm
              px-4
              py-2
              bg-green-500
              text-base
              font-medium
              text-white
              hover:bg-green-700
              focus:outline-none
              focus:ring-2
              focus:ring-offset-2
              focus:ring-indigo-500
              sm:ml-3 sm:w-auto sm:text-sm
            " />


        <input type="button" id="" value="delete" class="
              delete
              mt-3
              w-full
              inline-flex
              justify-center
              rounded-md
              border border-gray-300
              shadow-sm
              px-4
              py-2
              bg-red-500
              text-base text-white
              hover:bg-red-600
              focus:outline-none
              focus:ring-2
              focus:ring-offset-2
              focus:ring-indigo-500
              sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm
            " />


      </div>
    </div>
  </div>
  </div>
  <script>
    fetchPath = "http://localhost:3000/"
    const fullName = document.querySelector('.fullName')
    const email = document.querySelector('.email')
    const userName = document.querySelector('.userName')
    const password = document.querySelector('.password')
    const update = document.querySelector('.update')
    const remove = document.querySelector('.delete')
    const updateForm = document.querySelector('.updateForm')
    const students = ''
    const tbody = document.querySelector('.tbody')

    fetch(fetchPath + "api/getAllStudents")
      .then(res => res.json())

      .then((data) => data.data.map((row) => {
        console.log(row);
        tbody.innerHTML += `

            <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="ml-4">
                      <div class="text-sm font-medium text-gray-900">
                        ${row.studentId}
                      </div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="ml-4">
                      <div class="text-sm font-medium text-gray-900">
                        ${row.fullName}
                      </div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="ml-4">
                      <div class="text-sm font-medium text-gray-900">
                        ${row.email}
                      </div>
                    </div>
                  </div>
                </td>
                <td>
           <input     
              class="
                  update
                  text-indigo-500
                  border-indigo-600 border-[2px]
                  p-1
                  rounded-md
                  w-[5em]
                  text-center
                  cursor-pointer
                  hover:bg-indigo-600 hover:text-white
                "
                type="button"
                value="update"
                id="${row.studentId}"
                name="update"
                />
                    </td>
                  </tr>`
      }))

      tbody.addEventListener("click", (e) => {
      if (e.target.classList.contains("update"))
      updateForm.classList.remove('hidden')
      console.log(updateForm.target.classList.contains("fullName")); 
        // get the right data and populate the modal
        // fetch(fetchPath + `api/update/${e.target.id}`)
        // .then((response) => response.json())
        // .then(() => updateForm.classList.remove('hidden'))
    })
  </script>